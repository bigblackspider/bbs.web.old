(function () {
    var h = angular.module("BBSApp", []);
    h.controller("MainCtrl", ["$scope", "$http", function (a, e) {
        var d = function (b) {
            a.err = "";
            a.user = b.data;
            e.get(a.user.repos_url).then(c, f)
        }, c = function (b) {
            a.user.repos = b.data
        }, g = function (b) {
            a.err = "**** ERROR Cant find user details ****"
        }, f = function (b) {
            a.err = "**** ERROR Cant find repos data for user '" + a.user.name + "' ****"
        };
        a.search = function (a) {
            e.get("https://api.github.com/users/" + a).then(d, g)
        };
        a.message = "Peters Test";
        a.username = "angular";
        a.sortOrder = "-stargazers_count";
        a.finishLoading = function () {
        };
        a.save = function () {
            a.$broadcast("show-errors-check-validity");
            a.buildForm.$valid && (alert("build " + a.details.email), a.reset())
        };
        a.reset = function () {
            a.$broadcast("show-errors-reset");
            a.details = {name: "", email: ""}
        }
    }]);
    h.directive("showErrors", function (a) {
        return {
            restrict: "A", require: "^form", link: function (e, d, c, g) {
                c = d[0].querySelector("[name]");
                c = angular.element(c);
                var f = c.attr("name"), b = !1;
                c.bind("blur", function () {
                    b = !0;
                    d.toggleClass("has-error", g[f].$invalid)
                });
                e.$watch(function () {
                        return g[f].$invalid
                    },
                    function (a) {
                        !b && a || d.toggleClass("has-error", a)
                    });
                e.$on("show-errors-check-validity", function () {
                    d.toggleClass("has-error", g[f].$invalid)
                });
                e.$on("show-errors-reset", function () {
                    a(function () {
                        d.removeClass("has-error")
                    }, 0, !1)
                })
            }
        }
    })
})();
